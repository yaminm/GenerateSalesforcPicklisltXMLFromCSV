<!DOCTYPE html>
<html>
 <head>
  <title>CSV File to HTML Table Using AJAX jQuery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
 </head>
 <body>
    <input type="file" id="dealCsv"/>
    <textarea id="res" ></textarea>
 </body>
 <script>


    function uploadDealcsv () {}; 

    /*------ Method for read uploded csv file ------*/
    uploadDealcsv.prototype.getCsv = function(e) {
         
        let input = document.getElementById('dealCsv');
        input.addEventListener('change', function() {
  
          if (this.files && this.files[0]) {
  
              var myFile = this.files[0];
              var reader = new FileReader();
              
              reader.addEventListener('load', function (e) {
                  
                  let csvdata = e.target.result; 
                  
                  document.getElementById("res").value = parseCsv.getParsecsvdata(csvdata); // calling function for parse csv data 
              });
              
              reader.readAsBinaryString(myFile);
          }
        });
      }
  
      /*------- Method for parse csv data and display --------------*/
      uploadDealcsv.prototype.getParsecsvdata = function(data) {
  
        let [ headers, ...rows ] = data.split('\n').map(row => row.trim().split(','));

        let jsonData = rows.map(row => headers.reduce((data,header , i) => ({ [header]: row[i], ...data}), {__proto__:null}));


debugger;
            var xmlData = '';
            for(let i=0;i<jsonData.length; i++)
            {
                xmlData += '<value>\n';
                    xmlData +='\t<fullName>' + jsonData[i].value + '</fullName>\n';
                    xmlData +='\t<default>false</default>\n';
                    xmlData +='\t<label>' + jsonData[i].label + '</label>\n';
                xmlData += '</value>\n';
            }
    
        console.log(xmlData);
        return xmlData;
      }
  
  
    
    var parseCsv = new uploadDealcsv();
    parseCsv.getCsv();
 </script>
</html>
